def main_pipeline(user_query):
    # Step 1: Extract concept and intent from query
    concept, domain = nlp_understand(user_query)
    
    # Step 2: Query knowledge graph to get related info
    concept_data = knowledge_graph_query(concept, domain)
    
    # Step 3: Generate educational script from KG data
    script = generate_script(concept, concept_data)
    
    # Step 4: Convert script to structured slides/scenes
    slides = script_to_slides(script)
    
    # Step 5: Generate Manim scenes & render video clips
    video_clips = []
    for slide in slides:
        manim_code = generate_manim_code(slide)
        clip = render_manim(manim_code)
        video_clips.append(clip)
    
    # Step 6: Compile final video with optional voiceover and music
    voiceover = generate_tts(script)
    final_video = compile_video(video_clips, voiceover)
    
    # Step 7: Deliver final output to user
    deliver_output(final_video)
